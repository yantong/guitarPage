(function(){"use strict";var e={6717:function(e,t,n){var r=n(9242),o=n(3396),i=n(7139);const s={class:"wrapper"};function a(e,t,n,r,a,l){const c=(0,o.up)("scale");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",s,[(0,o.Wm)(c,{seledFre:a.seledFre},null,8,["seledFre"]),(0,o._)("span",null,(0,i.zw)(a.seledFre&&a.seledFre.name),1)]),(0,o._)("button",{ref:"startButton",onClick:t[0]||(t[0]=(...e)=>l.start&&l.start(...e)),class:"start-button"},null,512)],64)}n(8675),n(7380),n(1118);var l=n(5042);function c(e,t=50){let n=null;return function(){n||(n=setTimeout((()=>{e.apply(this,arguments),n=null})))}}class u{constructor(e){let{callback:t}=e;this.callback=t,this.context=null,this.recorder=null,this.stream=null,this.audioInput=null}start(){navigator.mediaDevices.getUserMedia({video:!1,audio:!0}).then((e=>{const t=1,n=1,r=4096,o=new l.ZP.AMDF({maxFrequency:800,minFrequency:10});this.stream=e,this.context=new(window.AudioContext||window.webkitAudioContext),this.recorder=this.context.createScriptProcessor(r,t,n),this.audioInput=this.context.createMediaStreamSource(e),this.recorder.connect(this.context.destination),this.audioInput.connect(this.recorder),this.recorder.onaudioprocess=c((e=>{const t=o(new Float32Array(e.inputBuffer.getChannelData(0).buffer));if(t){const e=1.09*t;this.callback(e)}}),100)}))}stop(){this.audioInput.disconnect(),this.recorder.disconnect(),this.context.close(),this.stream.getTracks()[0].stop()}}const h=440,d=58,f=["C","C♯","D","D♯","E","F","F♯","G","G♯","A","A♯","B"],p=[];for(let P=1;P<=108;P++){let e=h/2**((d-P-1)/12),t=f[P%12];p.push({fre:e,name:t.replace(t[0],t[0]+parseInt(P/12))})}var g=e=>{let t,n,r,o=-1;for(let s=0;s<p.length;s++){let n=Math.abs(e-p[s].fre);(n<t||-1===o)&&(t=n,o=s)}n=0==o?0:p[o-1].fre,r=o==p.length-1?p[o].fre+(p[o].fre-p[o-1].fre)/2:p[o+1].fre;let i={name:p[o].name,freRange:[n,p[o].fre,r],cur:e};return i};const w=["width","height"];function v(e,t,n,r,i,s){return(0,o.wg)(),(0,o.iD)("canvas",{width:i.width,height:i.height,class:"scale",ref:"scale"},null,8,w)}var m={components:{},props:{seledFre:{}},data(){return{width:0,height:0,preAngle:Math.PI/2,drawQueue:[],drawing:!1}},watch:{seledFre(e){this.makeDrawQueue(e)}},computed:{},methods:{makeDrawQueue(e={}){let t,n,{freRange:r,cur:o}=e,i=6,s=[];o&&(t=o>=r[1]?(o-r[1])/(r[2]-r[1])/2+.5:(o-r[0])/(r[1]-r[0])/2),n=o?40*Math.PI/180+Math.PI/180*parseInt(100*t):Math.PI/2;for(let a=1;a<=i;a++){let e=this.preAngle+(n-this.preAngle)/i*a;s.push(e)}this.preAngle=n,this.drawQueue.push(...s),!this.drawing&&this.draw()},draw(){if(!(this.drawing=this.drawQueue.length))return;let e=this.$refs.scale,t=e.getContext("2d"),n=window.devicePixelRatio,r=this.width/2,o=[r,r+20*n],i=this.drawQueue.shift();e.width=this.width,t.restore(),t.translate(...o),t.rotate(Math.PI);for(let s=0;s<=180;s++)t.beginPath(),t.strokeStyle="#2D5AFA",t.strokeStyle=s>=80&&s<=100?"#00AB44":t.strokeStyle,t.lineWidth=s%10==0?2*n:1*n,t.lineCap="round",s>0&&t.rotate(Math.PI/180),t.moveTo(r-10,0),t.lineTo(r-(s%10==0?20*n:15*n),0),s>=40&&s<=140&&s%2==0&&t.stroke();t.beginPath(),t.strokeStyle="#EC0000",t.lineWidth=4*n,t.lineCap="round",t.rotate(Math.PI+i),t.moveTo(r-30*n,0),t.lineTo(0,0),t.stroke(),requestAnimationFrame(this.draw)}},mounted(){let e=this.$refs.scale.getContext("2d"),t=window.devicePixelRatio,{width:n,height:r}=this.$refs.scale.getBoundingClientRect();this.width=t*n,this.height=t*r,e.scale(t,t),this.$nextTick((()=>{this.makeDrawQueue()}))}},b=n(89);const k=(0,b.Z)(m,[["render",v],["__scopeId","data-v-a326664e"]]);var y=k,A={name:"App",components:{Scale:y},data(){return{noteAnalyzer:null,seledFre:null}},mounted(){this.noteAnalyzer=new u({callback:e=>{this.seledFre=g(e)}}),this.$refs.startButton.click()},beforeUnmount(){this.noteAnalyzer.stop()},methods:{start(){this.noteAnalyzer.start()}}};const F=(0,b.Z)(A,[["render",a]]);var x=F,C=n(5431);(0,C.z)("service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}}),(0,r.ri)(x).mount("#app")}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}n.m=e,function(){var e=[];n.O=function(t,r,o,i){if(!r){var s=1/0;for(u=0;u<e.length;u++){r=e[u][0],o=e[u][1],i=e[u][2];for(var a=!0,l=0;l<r.length;l++)(!1&i||s>=i)&&Object.keys(n.O).every((function(e){return n.O[e](r[l])}))?r.splice(l--,1):(a=!1,i<s&&(s=i));if(a){e.splice(u--,1);var c=o();void 0!==c&&(t=c)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[r,o,i]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,r){var o,i,s=r[0],a=r[1],l=r[2],c=0;if(s.some((function(t){return 0!==e[t]}))){for(o in a)n.o(a,o)&&(n.m[o]=a[o]);if(l)var u=l(n)}for(t&&t(r);c<s.length;c++)i=s[c],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(u)},r=self["webpackChunkguitar"]=self["webpackChunkguitar"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=n.O(void 0,[998],(function(){return n(6717)}));r=n.O(r)})();
//# sourceMappingURL=app.9ad94a1e.js.map